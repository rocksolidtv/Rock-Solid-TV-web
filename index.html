<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Solid TV</title>
  <link rel="stylesheet" href="style.css">
  <meta name="description" content="Rock Solid TV — Uncensored History. Unfiltered Truth. Unshakable Faith.">
</head>
<body>
  <header>
    <h1>Rock Solid TV</h1>
    <p>Uncensored History. Unfiltered Truth. Unshakable Faith.</p>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#episodes">Episodes</a></li>
        <li><a href="#vault">Vault</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="about">
      <h2>About Me</h2>
      <p>Rocky Smith is the creator of Rock Solid TV. This is where the truth gets said raw, real, and plain — the Bible they won’t teach in Sunday school, the history they hid, and the red pills most won’t touch. KJV-only, straight talk.</p>
    </section>

    <section id="episodes">
      <h2>Episodes</h2>
      <ul>
        <li><a href="https://youtu.be/_7UtbBbB4o0?si=jOjkqzsRSN1Gegoj" target="_blank" rel="noopener">Was Paul a False Apostle?</a></li>
        <li><a href="https://youtu.be/L5gMyzPQDvc?si=vp7PZHyzgxfVKnsH" target="_blank" rel="noopener">They Rewrote Scripture</a></li>
        <li><a href="https://youtu.be/CBRw6pzoshY?si=0HGmuElE4Pkw4hg7" target="_blank" rel="noopener">The Real Israel</a></li>
        <li><a href="https://youtu.be/Iv2ttt_R8JY?si=lBgVhTErCHHilSMD" target="_blank" rel="noopener">Alien Disclosure Is A Setup</a></li>
        <li><a href="https://youtu.be/qhxOEKY3X3A?si=2eLGblUUmlMOwwdE" target="_blank" rel="noopener">The Bible Predicted Everything Happening Today</a></li>
        <li><a href="https://youtu.be/G_9j3sGzW5s?si=GMBDGmPIG8RSSSea" target="_blank" rel="noopener">Is Getting A Tattoo A Sin?</a></li>
        <li><a href="https://youtu.be/ENtg_-F9Lqo?si=FIcFU499dNM0b9JR" target="_blank" rel="noopener">The Truth About Fossil Fuel</a></li>
      </ul>
      <h3>Playlists</h3>
      <ul>
        <li><a href="https://youtube.com/playlist?list=PLZbAgMjaab9gfO4h4ufi1gRolKEqtMB2o&si=ml2vA6ur9YKjNzfr" target="_blank" rel="noopener">History They Don’t Teach In School</a></li>
        <li><a href="https://youtube.com/playlist?list=PLZbAgMjaab9h5wu9lZsNyV1HLZT474yB2&si=9fLap9XHpkF5yu8X" target="_blank" rel="noopener">Bible They Don’t Teach In Sunday School</a></li>
        <li><a href="https://youtube.com/playlist?list=PLZbAgMjaab9hvOz3Xl3vJBpM5tjOFwgJS&si=mdlKKlF85DWMup9K" target="_blank" rel="noopener">Red Pills</a></li>
      </ul>
    </section>

    <section id="vault" class="vault">
      <h2>The Vault — PDF Downloads</h2>
      <p class="muted">Drop PDFs into <code>/vault/</code>. This list uses <code>vault/manifest.json</code> (no API). If missing, it will try the GitHub API as a fallback.</p>
      <ul id="vault-list"></ul>
      <p id="vault-empty" class="muted" style="display:none">No PDFs found yet. Add files to <code>/vault</code> and update <code>vault/manifest.json</code>.</p>
    </section>
  </main>

  <footer id="contact">
    <p>Contact: <a href="mailto:rocksolidtvtruth@gmail.com">rocksolidtvtruth@gmail.com</a></p>
    <p>© <span id="year"></span> Rock Solid TV</p>
  </footer>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Vault manifest-first, GitHub API fallback
    const listEl  = document.getElementById('vault-list');
    const emptyEl = document.getElementById('vault-empty');

    function toHuman(n){ if(n>1e6) return (n/1e6).toFixed(1)+' MB'; if(n>1e3) return (n/1e3).toFixed(0)+' KB'; return n+' B'; }
    function renderList(items){
      if(!items || !items.length){ emptyEl.style.display='block'; return; }
      items.forEach(f => {
        const li = document.createElement('li');
        const name = (f.title || f.name || '').replace(/_/g,' ').replace(/-/g,' ');
        const size = f.size ? ' ('+toHuman(f.size)+')' : '';
        li.innerHTML = '<span class="name">'+name+'</span> ' +
                       '<a href="/vault/'+encodeURIComponent(f.name)+'" download>Download'+size+'</a>';
        listEl.appendChild(li);
      });
    }

    async function tryManifest(){
      try{
        const res = await fetch('/vault/manifest.json', {cache:'no-store'});
        if(!res.ok) return false;
        const data = await res.json();
        if(Array.isArray(data.files)){ renderList(data.files); return true; }
      }catch(e){}
      return false;
    }

    async function tryGitHubAPI(){
      const VAULT_CFG = { owner:'rocksolidtv', repo:'Rock-Solid-TV-web', branch:'main', path:'vault' };
      try{
        const api = 'https://api.github.com/repos/'+VAULT_CFG.owner+'/'+VAULT_CFG.repo+'/contents/'+VAULT_CFG.path+'?ref='+VAULT_CFG.branch;
        const res = await fetch(api);
        if(!res.ok) throw new Error('GitHub API error');
        const data = await res.json();
        const pdfs = (Array.isArray(data)?data:[]).filter(f=>/\.pdf$/i.test(f.name));
        const items = pdfs.map(f=>({name:f.name, size:f.size})).sort((a,b)=>a.name.localeCompare(b.name));
        renderList(items);
        return true;
      }catch(e){ return false; }
    }

    (async function initVault(){
      const ok = await tryManifest() || await tryGitHubAPI();
      if(!ok){
        emptyEl.style.display = 'block';
        emptyEl.textContent = 'No PDFs found. Add /vault/manifest.json (recommended) or make the repo public for API fallback.';
      }
    })();
  </script>
</body>
</html>
